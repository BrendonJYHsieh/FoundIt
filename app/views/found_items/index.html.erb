<!DOCTYPE html>
<html>
  <head>
    <title>All Found Items - FoundIt</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f7ff;
        color: #333;
      }
      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 40px 20px;
      }
      h1 {
        text-align: center;
        color: #2E5BBA;
        margin-bottom: 30px;
      }
      .found-items-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
      }
      .found-card {
        background: white;
        border-radius: 15px;
        padding: 0;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        text-decoration: none;
        color: inherit;
        overflow: hidden;
      }
      .found-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 18px rgba(46, 91, 186, 0.2);
      }
      .found-card img {
        width: 100%;
        height: 180px;
        object-fit: cover;
      }
      .found-card-content {
        padding: 20px;
      }
      .found-card h3 {
        margin: 0 0 10px;
        color: #2E5BBA;
      }
      .found-card p {
        margin: 4px 0;
        font-size: 0.95rem;
        color: #555;
      }
      .item-status {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: bold;
      }
      .status-active   { background: #e8f5e8; color: #2e7d32; }
      .status-returned { background: #fff7d1; color: #8c6d00; }
      .status-closed   { background: #ffebee; color: #c62828; }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>📦 My Found Items</h1>

      <% if @found_items.any? %>
        <div class="found-items-list">
          <% @found_items.each do |item| %>
            <%= link_to found_item_path(item), class: "found-card" do %>
              <% if item.photos_array.any? %>
                <img src="<%= item.photos_array.first %>" alt="Found item image">
              <% else %>
                <img src="https://via.placeholder.com/400x200?text=No+Image" alt="No image available">
              <% end %>
              
              <div class="found-card-content">
                <h3><%= item.item_type.capitalize %></h3>
                <p><strong>Description:</strong> <%= truncate(item.description, length: 80) %></p>
                <p><strong>Location:</strong> <%= item.location %></p>
                <p><strong>Date Found:</strong> <%= item.found_date.strftime("%b %d, %Y") %></p>
                <span class="item-status status-<%= item.status %>">
                  <%= item.status.capitalize %>
                </span>
              </div>
            <% end %>
          <% end %>
        </div>
      <% else %>
        <div style="
          background: white;
          border-radius: 15px;
          padding: 40px 30px;
          text-align: center;
          color: #666;
          box-shadow: 0 5px 15px rgba(0,0,0,0.05);
          border: 1px solid #e0e0e0;
          max-width: 600px;
          margin: 0 auto 40px auto;
        ">
          <p style="font-size: 1.2rem; margin-bottom: 10px;">📭 No found items have been posted yet.</p>
          <p style="font-size: 0.95rem; margin-bottom: 20px;">Be the first to help someone recover their lost belongings!</p>
          <%= link_to "Post a Found Item", new_found_item_path,
                style: "display:inline-block; background:#2E5BBA; color:white; padding:10px 22px; border-radius:25px; text-decoration:none; font-weight:bold; transition:all 0.3s ease;" %>
        </div>
      <% end %>

      <div style="text-align:center; margin-top:30px;">
        <%= link_to "← Back to Dashboard", dashboard_path,
              style: "color:#2E5BBA; text-decoration:none; font-weight:bold;" %>
      </div>
    </div>
  </body>
</html>